<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Azure App Configuration client library for .NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Azure App Configuration client library for .NET ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="azure-app-configuration-client-library-for-net">Azure App Configuration client library for .NET</h1>

<p>Azure App Configuration is a managed service that helps developers centralize their application configurations in one place, simply and securely.</p>
<p>Use the client library for App Configuration to:</p>
<ul>
<li>Create centrally stored application configuration settings</li>
<li>Retrieve settings</li>
<li>Update settings</li>
<li>Delete settings</li>
</ul>
<p><a href="https://www.nuget.org/packages/Azure.ApplicationModel.Configuration/">Package (NuGet)</a> | API reference documentation (coming soon) | <a href="https://docs.microsoft.com/azure/azure-app-configuration/">Product documentation</a></p>
<h2 id="getting-started">Getting started</h2>
<h3 id="install-the-package">Install the package</h3>
<p>Install the Azure App Configuration client library for .NET with <a href="https://www.nuget.org/">NuGet</a>:</p>
<pre><code class="lang-PowerShell">Install-Package Azure.ApplicationModel.Configuration -Version 1.0.0-preview.2
</code></pre>
<p><strong>Prerequisites</strong>: You must have an <a href="https://azure.microsoft.com/free/">Azure subscription</a>, and a <a href="https://docs.microsoft.com/azure/azure-app-configuration/quickstart-dotnet-core-app#create-an-app-configuration-store">Configuration Store</a> to use this package.</p>
<p>To create a Configuration Store, you can use the Azure Portal or <a href="https://docs.microsoft.com/cli/azure">Azure CLI</a>.</p>
<p>You need to install the Azure App Configuration CLI extension first by executing the following command:</p>
<pre><code class="lang-PowerShell">az extension add -n appconfig
</code></pre>
<p>After that, create the Configuration Store:</p>
<pre><code class="lang-PowerShell">az appconfig create --name &lt;config-store-name&gt; --resource-group &lt;resource-group-name&gt; --location eastus
</code></pre>
<h3 id="authenticate-the-client">Authenticate the client</h3>
<p>In order to interact with the App Configuration service, you'll need to create an instance of the <a href="src/ConfigurationClient.cs">Configuration Client</a> class. To make this possible, you'll need the connection string of the Configuration Store.</p>
<h4 id="get-credentials">Get credentials</h4>
<p>Use the <a href="https://docs.microsoft.com/cli/azure">Azure CLI</a> snippet below to get the connection string from the Configuration Store.</p>
<pre><code class="lang-PowerShell">az appconfig credential list --name &lt;config-store-name&gt;
</code></pre>
<p>Alternatively, get the connection string from the Azure Portal.</p>
<h4 id="create-client">Create client</h4>
<p>Once you have the value of the connection string, you can create the ConfigurationClient:</p>
<pre><code class="lang-c#">string connectionString = &lt;connection_string&gt;;
var client = new ConfigurationClient(connectionString);
</code></pre>
<h2 id="key-concepts">Key concepts</h2>
<h3 id="configuration-setting">Configuration setting</h3>
<p>A Configuration Setting is the fundamental resource within a Configuration Store. In its simplest form, it is a key and a value. However, there are additional properties such as the modifiable content type and tags fields that allow the value to be interpreted or associated in different ways.</p>
<p>The Label property of a Configuration Setting provides a way to separate Configuration Settings into different dimensions. These dimensions are user defined and can take any form. Some common examples of dimensions to use for a label include regions, semantic versions, or environments. Many applications have a required set of configuration keys that have varying values as the application exists across different dimensions.</p>
<p>For example, MaxRequests may be 100 in &quot;NorthAmerica&quot;, and 200 in &quot;WestEurope&quot;. By creating a Configuration Setting named MaxRequests with a label of &quot;NorthAmerica&quot; and another, only with a different value, in the &quot;WestEurope&quot; label, an application can seamlessly retrieve Configuration Settings as it runs in these two dimensions.</p>
<p>Properties of a Configuration Setting:</p>
<pre><code class="lang-c#">    string Key { get; set; }

    string Label { get; set; }

    string Value { get; set; }

    string ContentType { get; set; }

    string ETag { get; }

    DateTimeOffset LastModified { get; }

    bool Locked { get; }

    IDictionary&lt;string, string&gt; Tags { get; set; }
</code></pre>
<h2 id="examples">Examples</h2>
<p>The following sections provide several code snippets covering some of the most common Configuration Service tasks. Note that there are sync and async methods available for both:</p>
<ul>
<li><a href="#create-a-configuration-setting">Create a Configuration Setting</a></li>
<li><a href="#retrieve-a-configuration-setting">Retrieve a Configuration Setting</a></li>
<li><a href="#update-an-existing-configuration-setting">Update an existing Configuration Setting</a></li>
<li><a href="#delete-a-configuration-setting">Delete a Configuration Setting</a></li>
</ul>
<h3 id="create-a-configuration-setting">Create a Configuration Setting</h3>
<p>Create a Configuration Setting to be stored in the Configuration Store. There are two ways to store a Configuration Setting:</p>
<ul>
<li>Add creates a setting only if the setting does not already exist in the store.</li>
<li>Set creates a setting if it doesn't exist or overrides an existing setting.</li>
</ul>
<pre><code class="lang-c#">string connectionString = &lt;connection_string&gt;;
var client = new ConfigurationClient(connectionString);
var setting = new ConfigurationSetting(&quot;some_key&quot;, &quot;some_value&quot;);
client.Set(setting);
</code></pre>
<h3 id="retrieve-a-configuration-setting">Retrieve a Configuration Setting</h3>
<p>Retrieve a previously stored Configuration Setting by calling Get.</p>
<pre><code class="lang-c#">string connectionString = &lt;connection_string&gt;;
var client = new ConfigurationClient(connectionString);
var setting = new ConfigurationSetting(&quot;some_key&quot;, &quot;some_value&quot;);
client.Set(setting);
ConfigurationSetting setting = client.Get(&quot;some_key&quot;);
</code></pre>
<h3 id="update-an-existing-configuration-setting">Update an existing Configuration Setting</h3>
<p>Update an existing Configuration Setting by calling Update.</p>
<pre><code class="lang-c#">string connectionString = &lt;connection_string&gt;;
var client = new ConfigurationClient(connectionString);
var setting = new ConfigurationSetting(&quot;some_key&quot;, &quot;some_value&quot;);
client.Set(setting);
ConfigurationSetting setting = client.Update(&quot;some_key&quot;, &quot;new_value&quot;);
</code></pre>
<h3 id="delete-a-configuration-setting">Delete a Configuration Setting</h3>
<p>Delete an existing Configuration Setting by calling Delete.</p>
<pre><code class="lang-c#">string connectionString = &lt;connection_string&gt;;
var client = new ConfigurationClient(connectionString);
var setting = new ConfigurationSetting(&quot;some_key&quot;, &quot;some_value&quot;);
client.Set(setting);
ConfigurationSetting setting = client.Delete(&quot;some_key&quot;);
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="general">General</h3>
<p>When you interact with App Configuration using the .NET SDK, errors returned by the service correspond to the same HTTP status codes returned for <a href="https://github.com/Azure/AppConfiguration#rest-api-reference">REST API</a> requests.</p>
<p>For example, if you try to retrieve a Configuration Setting that doesn't exist in your Configuration Store, a <code>404</code> error is returned, indicating <code>Not Found</code>.</p>
<pre><code class="lang-c#">string connectionString = &lt;connection_string&gt;;
var client = new ConfigurationClient(connectionString);
ConfigurationSetting setting = client.Get(&quot;some_key&quot;);
</code></pre>
<p>You will notice that additional information is logged, like the Client Request ID of the operation.</p>
<pre><code>Message: Azure.RequestFailedException : StatusCode: 404, ReasonPhrase: 'Not Found', Version: 1.1, Content: System.Net.Http.NoWriteNoSeekStreamContent, Headers:
{
  Connection: keep-alive
  Date: Thu, 11 Apr 2019 00:16:57 GMT
  Server: nginx/1.13.9
  x-ms-client-request-id: cc49570c-9143-411e-a6c8-3287dd114034
  x-ms-request-id: 2ad025f7-1fe8-4da0-8648-8290e774ed61
  x-ms-correlation-request-id: 2ad025f7-1fe8-4da0-8648-8290e774ed61
  Strict-Transport-Security: max-age=15724800; includeSubDomains;
  Content-Length: 0
}
</code></pre>
<h2 id="next-steps">Next Steps</h2>
<h3 id="more-sample-code">More sample code</h3>
<p>The App Configuration client library includes additional functionality that can be set when creating the Configuration Client. These samples provide example of those scenarios:</p>
<ul>
<li><a href="samples/Sample1_HelloWorld.cs">Hello world</a></li>
<li><a href="samples/Sample2_HelloWorldExtended.cs">Hello world async extended</a></li>
<li><a href="samples/Sample4_Logging.cs">How to access diagnostic logs</a></li>
<li><a href="samples/Sample6_ConfiguringRetries.cs">How to configure retry policy</a></li>
<li><a href="samples/Sample7_ConfiguringPipeline.cs">How to configure service requests</a></li>
</ul>
<h3 id="project-to-project-references">Project-to-project references</h3>
<p>If the changes you are working on span both Azure.Core and Azure.Configuration then you can set this environment variable before launching Visual Studio. That will use Project To Project references between Azure.Configuration and Azure.Core instead of package references.</p>
<p>This will enable the project-to-project references:</p>
<pre><code class="lang-Batchfile">set UseProjectReferenceToAzureBase=true
</code></pre>
<p><img src="https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-net%2Fsdk%2Fappconfiguration%2FAzure.ApplicationModel.Configuration%2FREADME.png" alt="Impressions"></p>
<!-- LINKS -->
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Azure/azure-sdk-for-net/blob/master/docfx_project/articles/-appconfiguration-Azure.ApplicationModel.Configuration-README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
